# KYEC-å°ˆåˆ©æª¢ç´¢ç³»çµ±

ä¸€å€‹åŸºæ–¼AIçš„æ™ºèƒ½å°ˆåˆ©æª¢ç´¢ç³»çµ±ï¼Œæ”¯æŒæŠ€è¡“æè¿°æŸ¥è©¢ã€æ¢ä»¶æŸ¥è©¢å’ŒExcelæ‰¹é‡åˆ†æï¼Œä¸¦æä¾›æ™ºèƒ½å•ç­”åŠŸèƒ½ã€‚

## ğŸŒŸ ä¸»è¦åŠŸèƒ½

### 1. æŠ€è¡“æè¿°æŸ¥è©¢
- è¼¸å…¥æŠ€è¡“æè¿°ï¼Œè‡ªå‹•ç”Ÿæˆé—œéµå­—
- æ”¯æŒæ‹–æ‹‰å¼é—œéµå­—çµ„åˆ
- ä¸€éµæª¢ç´¢å’Œæ‰‹å‹•æª¢ç´¢æ¨¡å¼
- æ™ºèƒ½åŒç¾©è©æ“´å±•

### 2. æ¢ä»¶æŸ¥è©¢
- ç”³è«‹äººã€ç™¼æ˜äººã€å°ˆåˆ©è™ŸæŸ¥è©¢
- IPCåˆ†é¡å’Œæ—¥æœŸç¯„åœç¯©é¸
- å¤šæ¬„ä½çµ„åˆæŸ¥è©¢

### 3. Excelæ‰¹é‡åˆ†æ
- ä¸Šå‚³Excelæ–‡ä»¶æ‰¹é‡åˆ†æå°ˆåˆ©
- è‡ªå‹•ç”ŸæˆæŠ€è¡“ç‰¹å¾µå’ŒåŠŸæ•ˆ
- æ”¯æŒ.xlsxå’Œ.xlsæ ¼å¼

### 4. æ™ºèƒ½å•ç­” ğŸƒ
- åŸºæ–¼QWENçš„AIå•ç­”ç³»çµ±
- æ”¯æŒå°è©±è¨˜æ†¶åŠŸèƒ½
- é‡å°å°ˆåˆ©å…§å®¹çš„æ™ºèƒ½åˆ†æ

## ğŸ“ é …ç›®çµæ§‹

```
patent-search-system/
â”œâ”€â”€ index.html                 # ä¸»é é¢
â”œâ”€â”€ css/
â”‚   â””â”€â”€ styles.css             # ä¸»è¦æ¨£å¼æ–‡ä»¶
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ utils.js               # å·¥å…·å‡½æ•¸
â”‚   â”œâ”€â”€ api.js                 # APIé€šä¿¡æ¨¡å¡Š
â”‚   â”œâ”€â”€ ui.js                  # UIç®¡ç†æ¨¡å¡Š
â”‚   â”œâ”€â”€ search.js              # æœç´¢åŠŸèƒ½æ¨¡å¡Š
â”‚   â”œâ”€â”€ chat.js                # èŠå¤©åŠŸèƒ½æ¨¡å¡Š
â”‚   â”œâ”€â”€ excel.js               # Excelåˆ†ææ¨¡å¡Š
â”‚   â””â”€â”€ app.js                 # ä¸»æ‡‰ç”¨ç¨‹åº
â”œâ”€â”€ static/                    # éœæ…‹è³‡æº
â”‚   â”œâ”€â”€ icon_ceV2.ico          # èŠå¤©åœ–æ¨™
â”‚   â”œâ”€â”€ iconmonstr-idea-11-240.png
â”‚   â”œâ”€â”€ iconmonstr-time-17-240.png
â”‚   â””â”€â”€ iconmonstr-trash-can-27-240.png
â””â”€â”€ README.md                  # é …ç›®èªªæ˜
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### å‰ç«¯éƒ¨ç½²

1. **éƒ¨ç½²æ–‡ä»¶**
   ```bash
   # å°‡æ‰€æœ‰æ–‡ä»¶ä¸Šå‚³åˆ°Webæœå‹™å™¨
   # ç¢ºä¿ç›®éŒ„çµæ§‹æ­£ç¢º
   ```

2. **é…ç½®APIåœ°å€**
   - åœ¨`js/api.js`ä¸­ä¿®æ”¹é»˜èªAPIåœ°å€
   - æˆ–åœ¨ç•Œé¢ä¸­è¨­ç½®APIåœ°å€

3. **ç²å–GPSS APIå¯†é‘°**
   - è¨ªå•[æ™ºæ…§è²¡ç”¢å±€APIç”³è«‹](https://tiponet.tipo.gov.tw/gpss1/gpsskmc/gpssapi?@@0.532614314057245)
   - ç”³è«‹GPSS APIé©—è­‰ç¢¼

### ç³»çµ±éœ€æ±‚

- **ç€è¦½å™¨**: Chrome, Firefox, Safari, Edge (æœ€æ–°ç‰ˆæœ¬)
- **ç¶²çµ¡**: éœ€è¦é€£æ¥åˆ°å¾Œç«¯APIæœå‹™
- **æ–‡ä»¶å¤§å°**: Excelæ–‡ä»¶æœ€å¤§10MB

## ğŸ”§ å¾Œç«¯APIéœ€æ±‚

ç³»çµ±éœ€è¦å¾Œç«¯APIæä¾›ä»¥ä¸‹ç«¯é»ï¼š

### åŸºç¤æœå‹™
```
GET  /ping                                    # å¥åº·æª¢æŸ¥
GET  /api/v1/patents/test/ping               # å°ˆåˆ©æœå‹™æ¸¬è©¦
POST /api/v1/patents/test/gpss               # GPSS APIæ¸¬è©¦
```

### é—œéµå­—å’Œæœç´¢
```
POST /api/v1/patents/keywords/generate-for-confirmation    # ç”Ÿæˆé—œéµå­—
POST /api/v1/patents/search/tech-description-confirmed     # ç¢ºèªé—œéµå­—æœç´¢
POST /api/v1/patents/search/tech-description-with-synonyms # åŒç¾©è©æœç´¢
POST /api/v1/patents/condition/search                      # æ¢ä»¶æœç´¢
```

### Excelåˆ†æ
```
POST /api/v1/patents/excel/upload-and-analyze        # ä¸Šå‚³åˆ†æExcel
POST /api/v1/patents/excel/export-analysis-results   # å°å‡ºåˆ†æçµæœ
```

### æ™ºèƒ½å•ç­”
```
POST /api/v1/patents/qa/ask-simple                   # ç°¡å–®å•ç­”
POST /api/v1/patents/qa/ask-with-memory               # è¨˜æ†¶å•ç­”
GET  /api/v1/patents/qa/memory-status/{session_id}   # è¨˜æ†¶ç‹€æ…‹
GET  /api/v1/patents/qa/history/{session_id}         # å°è©±æ­·å²
POST /api/v1/patents/qa/clear-memory                 # æ¸…é™¤è¨˜æ†¶
```

### è«‹æ±‚æ ¼å¼ç¤ºä¾‹

#### æŠ€è¡“æè¿°æœç´¢è«‹æ±‚
```json
{
  "session_id": "session_123456",
  "description": "è‡ªå‹•åŒ–æ™¶åœ“æ¢é‡å°ç³»çµ±ï¼Œå…·å‚™ç²¾å¯†å®šä½æ§åˆ¶...",
  "generated_keywords": ["æ™¶åœ“", "æ¢é‡å°", "è‡ªå‹•åŒ–"],
  "selected_keywords": ["æ™¶åœ“", "æ¢é‡å°", "å®šä½æ§åˆ¶"],
  "custom_keywords": [],
  "user_code": "YOUR_GPSS_API_KEY",
  "max_results": 1000,
  "use_and_or_logic": false
}
```

#### æ™ºèƒ½å•ç­”è«‹æ±‚
```json
{
  "session_id": "session_123456",
  "question": "é€™äº›å°ˆåˆ©ä¸­å“ªå€‹æŠ€è¡“æœ€å…ˆé€²ï¼Ÿ",
  "use_memory": true
}
```

## ğŸ¨ ç•Œé¢åŠŸèƒ½

### å´é‚Šæ¬„è¨­å®š
- GPSS APIè¨­å®šå’Œé©—è­‰
- å°ˆåˆ©å…¨æ–‡æŸ¥è©¢
- APIé€£æ¥è¨­å®š
- æœå‹™ç‹€æ…‹ç›£æ§

### ä¸»è¦åŠŸèƒ½å€
- **æŠ€è¡“æè¿°æŸ¥è©¢**: é—œéµå­—ç”Ÿæˆå’Œæ‹–æ‹‰å¼æœç´¢
- **æ¢ä»¶æŸ¥è©¢**: å¤šæ¬„ä½çµ„åˆæœç´¢
- **è³‡æ–™åˆ†æ**: Excelæ–‡ä»¶æ‰¹é‡è™•ç†

### æ™ºèƒ½å•ç­”
- å´é‚ŠèŠå¤©é¢æ¿
- å°è©±è¨˜æ†¶åŠŸèƒ½
- æ­·å²è¨˜éŒ„æŸ¥çœ‹
- è¨˜æ†¶ç®¡ç†

## ğŸ”§ æŠ€è¡“ç‰¹æ€§

### å‰ç«¯æŠ€è¡“
- **åŸç”ŸJavaScript**: æ¨¡å¡ŠåŒ–æ¶æ§‹
- **éŸ¿æ‡‰å¼è¨­è¨ˆ**: æ”¯æŒç§»å‹•è¨­å‚™
- **æ‹–æ‹‰åŠŸèƒ½**: ç›´è§€çš„é—œéµå­—æ“ä½œ
- **é€²åº¦è¿½è¹¤**: å¯¦æ™‚æ“ä½œåé¥‹

### æ ¸å¿ƒæ¨¡å¡Š

#### 1. Utils.js - å·¥å…·å‡½æ•¸
- å­—ç¬¦ä¸²è™•ç†å’Œé©—è­‰
- æ—¥æœŸæ ¼å¼åŒ–
- æœ¬åœ°å­˜å„²ç®¡ç†
- é€šç”¨è¼”åŠ©å‡½æ•¸

#### 2. API.js - APIé€šä¿¡
- RESTful APIå°è£
- è«‹æ±‚é‡è©¦æ©Ÿåˆ¶
- éŒ¯èª¤è™•ç†
- æ–‡ä»¶ä¸Šå‚³æ”¯æŒ

#### 3. UI.js - ç•Œé¢ç®¡ç†
- DOMæ“ä½œå°è£
- é€²åº¦æ¢å‹•ç•«
- æ¶ˆæ¯æç¤º
- æ¨¡æ…‹æ¡†ç®¡ç†

#### 4. Search.js - æœç´¢åŠŸèƒ½
- é—œéµå­—ç”Ÿæˆ
- æ‹–æ‹‰æ“ä½œ
- æœç´¢é‚è¼¯æ§‹å»º
- çµæœæ¸²æŸ“

#### 5. Chat.js - èŠå¤©åŠŸèƒ½
- QWEN AIé›†æˆ
- å°è©±è¨˜æ†¶
- æ­·å²ç®¡ç†
- ç‹€æ…‹è¿½è¹¤

#### 6. Excel.js - æ–‡ä»¶è™•ç†
- æ–‡ä»¶é©—è­‰
- ä¸Šå‚³é€²åº¦
- çµæœåˆ†æ
- å°å‡ºåŠŸèƒ½

## ğŸ” å®‰å…¨è€ƒæ…®

- APIå¯†é‘°æœ¬åœ°å­˜å„²ï¼ˆlocalStorageï¼‰
- HTTPSé€šä¿¡å»ºè­°
- æ–‡ä»¶å¤§å°å’Œé¡å‹é©—è­‰
- XSSé˜²è­·ï¼ˆHTMLè½‰ç¾©ï¼‰

## ğŸ“Š ä½¿ç”¨çµ±è¨ˆ

ç³»çµ±æ”¯æŒä»¥ä¸‹çµ±è¨ˆåŠŸèƒ½ï¼š
- æœç´¢æ¬¡æ•¸è¿½è¹¤
- APIèª¿ç”¨ç›£æ§
- éŒ¯èª¤æ—¥èªŒè¨˜éŒ„
- æ€§èƒ½æŒ‡æ¨™æ”¶é›†

## ğŸ› ï¸ é–‹ç™¼èªªæ˜

### èª¿è©¦åŠŸèƒ½
```javascript
// æŸ¥çœ‹ç³»çµ±ç‹€æ…‹
window.patentSearchApp.showStatus()

// æŸ¥çœ‹æ¨¡å¡Šç‹€æ…‹
console.log(searchManager.getSearchResults('tech'))
console.log(chatManager.getChatHistory())
console.log(excelManager.getAnalysisStats())
```

### è‡ªå®šç¾©é…ç½®
```javascript
// ä¿®æ”¹APIåœ°å€
apiService.setBaseUrl('https://your-api-server.com')

// è¨­ç½®æœƒè©±ID
searchManager.setSessionId('custom-session-id')
chatManager.setSessionId('custom-session-id')
```

## ğŸ“‹ å¾Œç«¯å¯¦ç¾å»ºè­°

### æŠ€è¡“å †ç–Š
- **APIæ¡†æ¶**: FastAPI (Python) æˆ– Express.js (Node.js)
- **AIæ¨¡å‹**: Qwen 2.5 (é€šç¾©åƒå•)
- **æ•¸æ“šåº«**: PostgreSQL + Redis (å°è©±è¨˜æ†¶)
- **æ–‡ä»¶è™•ç†**: pandas, openpyxl
- **å°ˆåˆ©API**: GPSS (æ”¿åºœå°ˆåˆ©æœç´¢æœå‹™)

### æ ¸å¿ƒåŠŸèƒ½å¯¦ç¾

#### 1. é—œéµå­—ç”Ÿæˆ
```python
# ä½¿ç”¨Qwenæ¨¡å‹ç”Ÿæˆé—œéµå­—
async def generate_keywords(description: str):
    prompt = f"æ ¹æ“šä»¥ä¸‹æŠ€è¡“æè¿°ç”Ÿæˆ5å€‹å°ˆåˆ©æœç´¢é—œéµå­—ï¼š{description}"
    keywords = await qwen_client.chat(prompt)
    return process_keywords(keywords)
```

#### 2. å°ˆåˆ©æœç´¢
```python
# èª¿ç”¨GPSS APIé€²è¡Œå°ˆåˆ©æœç´¢
async def search_patents(keywords: List[str], user_code: str):
    gpss_query = build_gpss_query(keywords)
    results = await gpss_client.search(gpss_query, user_code)
    return process_patent_results(results)
```

#### 3. æ™ºèƒ½å•ç­”
```python
# åŸºæ–¼æœç´¢çµæœçš„å•ç­”
async def answer_question(question: str, session_id: str, use_memory: bool):
    context = await get_search_context(session_id)
    if use_memory:
        history = await get_conversation_history(session_id)
        context += format_conversation_context(history)
    
    answer = await qwen_client.chat(question, context=context)
    await save_conversation(session_id, question, answer)
    return answer
```

## ğŸ“ æ”¯æ´è¯ç¹«

å¦‚æœ‰æŠ€è¡“å•é¡Œæˆ–å»ºè­°ï¼Œè«‹è¯ç¹«é–‹ç™¼åœ˜éšŠã€‚

## ğŸ“„ æˆæ¬Šè²æ˜

æœ¬é …ç›®ç‚ºå…§éƒ¨ä½¿ç”¨ç³»çµ±ï¼Œè«‹éµå®ˆç›¸é—œä½¿ç”¨æ¢æ¬¾å’Œéš±ç§æ”¿ç­–ã€‚

---

**ç‰ˆæœ¬**: v2.0  
**æ›´æ–°æ—¥æœŸ**: 2024å¹´12æœˆ  
**é–‹ç™¼åœ˜éšŠ**: KYECå°ˆåˆ©æª¢ç´¢å°çµ„